var feedsWidgetNs=feedsWidgetNs||{};feedsWidgetNs.DeviceTypes={mobile:"mobile",desktop:"desktop"};
var feedsWidgetNs=feedsWidgetNs||{};feedsWidgetNs.FeedViewTypes={column:"column",twoColumns:"twoColumns",imageCaption:"imageCaption"};
var feedsWidgetNs=feedsWidgetNs||{};feedsWidgetNs.BaseFeed=function(e,s,d){this.caption=e,this.url=s,this.isOpenInNewTab=d},feedsWidgetNs.BaseThumbnailFeed=function(e,s,d,i){feedsWidgetNs.BaseFeed.call(this,s,d,i),this.thumbnail=e},feedsWidgetNs.BaseThumbnailFeed.prototype=new feedsWidgetNs.BaseFeed,feedsWidgetNs.OrganicFeed=function(e,s,d){feedsWidgetNs.BaseThumbnailFeed.call(this,e,s,d,!1)},feedsWidgetNs.OrganicFeed.prototype=new feedsWidgetNs.BaseThumbnailFeed,feedsWidgetNs.SponsoredFeed=function(e,s,d,i){feedsWidgetNs.BaseThumbnailFeed.call(this,e,s,d,!0),this.sourceRecommendationName=i},feedsWidgetNs.SponsoredFeed.prototype=new feedsWidgetNs.BaseThumbnailFeed;
var feedsWidgetNs=feedsWidgetNs||{};feedsWidgetNs.feedFactory=function(){return{create:function(e){var n,r=function(e){return 0!=e.length||null!=e[0]?e[0].url:"defaultThumbnailUrl.png"}(e.thumbnail);switch(e.origin){case"organic":n=new feedsWidgetNs.OrganicFeed(r,e.name,e.url);break;case"sponsored":n=new feedsWidgetNs.SponsoredFeed(r,e.name,e.url,e.branding);break;default:throw"Unknown feed type: "+e.origin}return n}.bind(this)}};
var feedsWidgetNs=feedsWidgetNs||{};feedsWidgetNs.feedHtmlFactory=function(){return{create:function(e,n){var a;switch(e){case feedsWidgetNs.FeedViewTypes.column:a=function(e){var n=document.createElement("a");n.href=e.url,e.isOpenInNewTab&&(n.target="_blank");n.className="fw-feed-column-view";var a=document.createElement("span");a.className="fw-feed-thumbnail",a.style.backgroundImage="url('"+e.thumbnail+"')",n.appendChild(a);a=document.createElement("span");a.className="fw-feed-caption",a.innerText=e.caption,n.appendChild(a),e instanceof feedsWidgetNs.SponsoredFeed&&((a=document.createElement("span")).className="fw-feed-sponser",a.innerText=e.sourceRecommendationName,n.appendChild(a));return n}(n);break;case feedsWidgetNs.FeedViewTypes.twoColumns:a=function(e){var n=document.createElement("a");n.href=e.url,e.isOpenInNewTab&&(n.target="_blank");n.className="fw-feed-two-columns-view";var a=document.createElement("div");a.className="fw-feed-thumbnail",a.style.backgroundImage="url('"+e.thumbnail+"')",n.appendChild(a);var t=document.createElement("div");t.className="fw-feed-col-two",n.appendChild(t);a=document.createElement("span");a.className="fw-feed-caption",a.innerText=e.caption,t.appendChild(a),e instanceof feedsWidgetNs.SponsoredFeed&&((a=document.createElement("span")).className="fw-feed-sponser",a.innerText=e.sourceRecommendationName,t.appendChild(a));return n}(n);break;case feedsWidgetNs.FeedViewTypes.imageCaption:a=getImageCapationView(n);break;default:throw"Unknown feed view type: "+feedResponse.origin}return a}.bind(this)}};
var feedsWidgetNs=feedsWidgetNs||{};feedsWidgetNs.feedsWidget=function(e,t,n){return this.publisherId=e,this.apiKey=t,this.sourceId=n,{render:function(s,e,d){!function(e,t,n,i,s,d,o){var r,e=function(e){return e<=800?feedsWidgetNs.DeviceTypes.mobile:feedsWidgetNs.DeviceTypes.desktop}(e);r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");s=["http://api.taboola.com/1.0/json/",t,"/recommendations.get","?app.type=",e,"&app.apikey=",n,"&source.id=",i,"&count=",s,"&source.url=http://www.site.com/videos/214321562187.html&source.type=video"].join("");r.open("GET",s),r.addEventListener("readystatechange",function(){var e;r.readyState===XMLHttpRequest.DONE&&(200==r.status?null!=(e=JSON.parse(r.responseText)).list&&0!=e.list.length?(e=function(e){for(var t=[],n=new feedsWidgetNs.feedFactory,i=0;i<e.length;i++){var s=n.create(e[i]);t.push(s)}return t}(e.list),d(e)):d([]):o("Can't connect to Taboola's feeds endpoint"))}),r.send()}(window.innerWidth,this.publisherId,this.apiKey,this.sourceId,e,function(e){try{if(0==e.length)return t=s,n=document.createDocumentFragment(),i=document.createElement("span"),(i=n.appendChild(i)).className="fw-empty-state",i.innerText="No feeds for you",document.getElementById(t).appendChild(n),0;!function(e,t,n){var i=document.createDocumentFragment(),s=document.createElement("div");(s=i.appendChild(s)).className="fw-main-container";for(var d=new feedsWidgetNs.feedHtmlFactory,o=0;o<e.length;o++){var r=d.create(n,e[o]);s.appendChild(r)}document.getElementById(t).appendChild(i)}(e,s,d)}catch(e){o(e)}var t,n,i},function(e){o(e)})}.bind(this)};function o(e){console.error(e)}};